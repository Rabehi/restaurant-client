---
import Layout from "../layouts/Layout.astro";
import App from "../components/App";

// Cargar los datos del servidor de manera síncrona
const response = await fetch("http://localhost:3000/productos");
const productos = await response.json();

// Filtrar las categorías dentro de Astro
const entrantes = productos.filter((item) => item.categoria === 2);
const principales = productos.filter((item) => item.categoria === 3);
const postres = productos.filter((item) => item.categoria === 4);
const bebidas = productos.filter((item) => item.categoria === 1);
---

<Layout title="Welcome to quickorder.">
  <section
    class="bg-white dark:bg-gray-900 mt-5 flex items-center justify-center"
  >
    <h1
      class="mb-4 text-3xl font-extrabold text-gray-900 dark:text-white md:text-5xl lg:text-6xl"
    >
      <span
        class="text-transparent bg-clip-text bg-gradient-to-r to-emerald-600 from-sky-400"
        >Quickorder</span
      >
    </h1>
  </section>

  <App
    productos={productos}
    entrantes={entrantes}
    principales={principales}
    postres={postres}
    bebidas={bebidas}
    client:load
  />
</Layout>
